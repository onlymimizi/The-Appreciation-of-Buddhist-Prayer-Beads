<!--analysis-history.wxml-->
<view class="container">
  <view wx:if="{{historyList.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ“</view>
    <view class="empty-text">æš‚æ— é‰´èµè®°å½•</view>
    <view class="empty-desc">å¿«å»é¦–é¡µä¸Šä¼ ä½›ç ç…§ç‰‡è¿›è¡ŒAIé‰´èµå§</view>
    <button class="goto-home-btn" bindtap="gotoHome">å»é‰´èµ</button>
  </view>

  <view wx:else class="history-list">
    <block wx:for="{{historyList}}" wx:key="id">
      <view class="history-item card" bindtap="viewResult" data-item="{{item}}">
        <view class="item-header">
          <image class="item-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
          <view class="item-info">
            <view class="item-material">{{item.result.material}}</view>
            <view class="item-estimate">{{item.result.estimate}}</view>
            <view class="item-date">{{item.date}}</view>
          </view>
          <view class="item-actions">
            <view class="action-btn" bindtap="shareItem" data-item="{{item}}" catchtap="true">
              <text class="action-icon">ğŸ“¤</text>
            </view>
            <view class="action-btn" bindtap="deleteItem" data-id="{{item.id}}" catchtap="true">
              <text class="action-icon">ğŸ—‘ï¸</text>
            </view>
          </view>
        </view>
        <view class="item-comment">{{item.result.comment}}</view>
      </view>
    </block>
  </view>
</view>