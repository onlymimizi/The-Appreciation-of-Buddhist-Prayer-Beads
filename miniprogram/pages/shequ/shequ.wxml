<!--shequ.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-tabs">
      <view class="nav-tab {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">
        æœ€æ–°
      </view>
      <view class="nav-tab {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">
        çƒ­é—¨
      </view>
      <view class="nav-tab {{currentTab === 2 ? 'active' : ''}}" bindtap="switchTab" data-index="2">
        ç²¾å
      </view>
    </view>
    <view class="post-btn" bindtap="createPost">
      <text>+</text>
    </view>
  </view>

  <!-- å¹¿å‘Šä½ -->
  <view class="ad-container">
    <ad unit-id="adunit-xxxxxxxxxxxxxxxx" ad-intervals="30"></ad>
  </view>

  <!-- å¸–å­åˆ—è¡¨ -->
  <view class="post-list">
    <block wx:for="{{currentPosts}}" wx:key="id">
      <view class="post-item card" bindtap="viewPost" data-id="{{item.id}}">
        <!-- ç”¨æˆ·ä¿¡æ¯ -->
        <view class="post-header">
          <view class="user-info">
            <image class="user-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
            <view class="user-details">
              <view class="user-name">{{item.username}}</view>
              <view class="post-time">{{item.time}}</view>
            </view>
          </view>
          <view wx:if="{{item.isHot}}" class="hot-tag">çƒ­é—¨</view>
          <view wx:if="{{item.isElite}}" class="elite-tag">ç²¾å</view>
        </view>

        <!-- å¸–å­å†…å®¹ -->
        <view class="post-content">
          <view class="post-title">{{item.title}}</view>
          <view class="post-text">{{item.content}}</view>
          <view wx:if="{{item.images.length > 0}}" class="post-images">
            <block wx:for="{{item.images}}" wx:key="*this" wx:for-item="image">
              <image class="post-image" src="{{image}}" mode="aspectFill" 
                     bindtap="previewImage" data-src="{{image}}" data-list="{{item.images}}"></image>
            </block>
          </view>
        </view>

        <!-- å¸–å­ç»Ÿè®¡ -->
        <view class="post-stats">
          <view class="stat-item" bindtap="likePost" data-id="{{item.id}}">
            <text class="stat-icon {{item.isLiked ? 'liked' : ''}}">â¤ï¸</text>
            <text class="stat-text">{{item.likes}}</text>
          </view>
          <view class="stat-item">
            <text class="stat-icon">ğŸ’¬</text>
            <text class="stat-text">{{item.comments}}</text>
          </view>
          <view class="stat-item">
            <text class="stat-icon">ğŸ‘ï¸</text>
            <text class="stat-text">{{item.views}}</text>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}">
    <text>åŠ è½½æ›´å¤š...</text>
  </view>
</view>