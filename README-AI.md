# ä½›ç é‰´èµ AI æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿ

åŸºäº OpenAI GPT-4 Vision å’Œ Google Gemini Vision çš„ä½›ç æ™ºèƒ½é‰´èµå¾®ä¿¡å°ç¨‹åºã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

- ğŸ¤– **åŒ AI å¼•æ“**ï¼šæ”¯æŒ OpenAI GPT-4 Vision å’Œ Google Gemini Vision
- ğŸ“± **å¾®ä¿¡å°ç¨‹åº**ï¼šåŸç”Ÿå°ç¨‹åºä½“éªŒï¼Œæµç•…ä¾¿æ·
- ğŸ” **ä¸“ä¸šé‰´èµ**ï¼šæè´¨è¯†åˆ«ã€å·¥è‰ºè¯„ä¼°ã€ä»·å€¼ä¼°ç®—
- ğŸ“š **æ–‡åŒ–ä¼ æ‰¿**ï¼šæä¾›ä½›ç æ–‡åŒ–èƒŒæ™¯å’Œä¿å…»å»ºè®®
- ğŸ›¡ï¸ **å®‰å…¨å¯é **ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œé™çº§æœºåˆ¶

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### AI åˆ†æåŠŸèƒ½
- âœ… ä½›ç æè´¨è¯†åˆ«ï¼ˆå°å¶ç´«æª€ã€æµ·å—é»„èŠ±æ¢¨ã€é‡‘åˆšè©æç­‰ï¼‰
- âœ… å·¥è‰ºæ°´å¹³è¯„ä¼°ï¼ˆæ‰‹å·¥æ‰“ç£¨ã€ä¼ ç»Ÿå·¥è‰ºç­‰ï¼‰
- âœ… å¸‚åœºä»·å€¼ä¼°ç®—
- âœ… ä¸“ä¸šé‰´èµå»ºè®®
- âœ… æ–‡åŒ–å†å²èƒŒæ™¯ä»‹ç»
- âœ… ä¿å…»ç›˜ç©æŒ‡å¯¼

### ç”¨æˆ·ä½“éªŒ
- ğŸ“¸ æ‹ç…§è¯†åˆ« + ç›¸å†Œé€‰æ‹©
- ğŸ“Š AI æœåŠ¡çŠ¶æ€å®æ—¶æ˜¾ç¤º
- ğŸ“ åˆ†æå†å²è®°å½•ç®¡ç†
- â¤ï¸ æ”¶è—å’Œåˆ†äº«åŠŸèƒ½
- ğŸ¯ ç½®ä¿¡åº¦è¯„ä¼°æ˜¾ç¤º

### æŠ€æœ¯ç‰¹æ€§
- ğŸ”„ æ™ºèƒ½é™çº§ï¼šAI æœåŠ¡ä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼
- ğŸ–¼ï¸ å›¾ç‰‡ä¼˜åŒ–ï¼šè‡ªåŠ¨å‹ç¼©å’Œæ ¼å¼è½¬æ¢
- ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤ï¼šAPI é™æµã€æ–‡ä»¶éªŒè¯ã€CORS é…ç½®
- âš¡ é«˜æ€§èƒ½ï¼šå¹¶å‘å¤„ç†ã€ç¼“å­˜æœºåˆ¶

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
ä½›ç é‰´èµ-AIé¡¹ç›®/
â”œâ”€â”€ ai-backend/                 # AI åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ services/              # AI æœåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ openaiService.js   # OpenAI GPT-4 Vision
â”‚   â”‚   â”œâ”€â”€ geminiService.js   # Google Gemini Vision
â”‚   â”‚   â””â”€â”€ aiService.js       # ç»Ÿä¸€ AI æ¥å£
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨
â”‚   â””â”€â”€ package.json           # ä¾èµ–é…ç½®
â”œâ”€â”€ frontend-updates/          # å‰ç«¯æ›´æ–°æ–‡ä»¶
â”‚   â”œâ”€â”€ pages/                 # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ app.json              # å°ç¨‹åºé…ç½®
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ deployment-guide.md       # éƒ¨ç½²æŒ‡å—
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd buddhist-beads-ai

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥
```

### 2. åç«¯éƒ¨ç½²

```bash
# å®‰è£…ä¾èµ–
cd ai-backend
npm install

# å¯åŠ¨æœåŠ¡
npm run dev  # å¼€å‘æ¨¡å¼
npm start    # ç”Ÿäº§æ¨¡å¼
```

### 3. å‰ç«¯æ›´æ–°

å°† `frontend-updates/` ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ä¸­ï¼š

```bash
# æ›´æ–° API è°ƒç”¨æ–‡ä»¶
cp frontend-updates/utils/api.js your-miniprogram/utils/

# æ›´æ–°é¡µé¢æ–‡ä»¶
cp frontend-updates/pages/index/* your-miniprogram/pages/index/
cp frontend-updates/pages/result/* your-miniprogram/pages/result/

# æ›´æ–°é…ç½®æ–‡ä»¶
cp frontend-updates/app.json your-miniprogram/
```

### 4. é…ç½®è¯´æ˜

#### ç¯å¢ƒå˜é‡é…ç½® (.env)
```env
# é€‰æ‹© AI æœåŠ¡
AI_SERVICE=openai  # æˆ– gemini

# OpenAI é…ç½®
OPENAI_API_KEY=sk-your-openai-key
OPENAI_BASE_URL=https://api.openai.com/v1

# Gemini é…ç½®
GEMINI_API_KEY=your-gemini-key

# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development
```

#### å¾®ä¿¡å°ç¨‹åºé…ç½®
åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨åŸŸåï¼š
- requeståˆæ³•åŸŸåï¼š`https://your-domain.com`
- uploadFileåˆæ³•åŸŸåï¼š`https://your-domain.com`

## ğŸ”§ API æ¥å£

### å¥åº·æ£€æŸ¥
```http
GET /health
```

### å›¾ç‰‡åˆ†æ
```http
POST /api/analyze
Content-Type: multipart/form-data

å‚æ•°ï¼šimage (å›¾ç‰‡æ–‡ä»¶)
```

### Base64 åˆ†æ
```http
POST /api/analyze-base64
Content-Type: application/json

{
  "imageData": "data:image/jpeg;base64,..."
}
```

### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "data": {
    "material": "å°å¶ç´«æª€",
    "craft": "æ‰‹å·¥æ‰“ç£¨",
    "estimate": "Â¥800 - Â¥2000",
    "comment": "åŒ…æµ†è‡ªç„¶ï¼Œçº¹ç†æ¸…æ™°ï¼Œå·¥è‰ºè¾ƒä½³",
    "confidence": 85,
    "features": ["å¯†åº¦é«˜", "æ²¹æ€§è¶³", "çº¹ç†ç»†è…»"],
    "description": "å¸ç‹ä¹‹æœ¨ï¼Œè´¨åœ°åšç¡¬ï¼Œçº¹ç†ç»†è…»",
    "culturalBackground": "ä½›ç æ–‡åŒ–å†å²èƒŒæ™¯...",
    "careInstructions": "ä¿å…»å’Œç›˜ç©å»ºè®®...",
    "analysisTime": "2024-01-01T00:00:00.000Z",
    "aiService": "openai"
  }
}
```

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### Docker éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t fozhu-ai-backend .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 --env-file .env fozhu-ai-backend
```

### PM2 éƒ¨ç½²
```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
cd ai-backend
pm2 start server.js --name "fozhu-ai-backend"
pm2 startup
pm2 save
```

### Nginx é…ç½®
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location /api/ {
        proxy_pass http://localhost:3000/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        client_max_body_size 10M;
    }
}
```

## ğŸ“Š åŠŸèƒ½æ¼”ç¤º

### 1. æ‹ç…§è¯†åˆ«
ç”¨æˆ·å¯ä»¥é€šè¿‡æ‹ç…§æˆ–é€‰æ‹©ç›¸å†Œå›¾ç‰‡è¿›è¡Œä½›ç è¯†åˆ«

### 2. AI åˆ†æç»“æœ
- **æè´¨è¯†åˆ«**ï¼šå°å¶ç´«æª€ã€æµ·å—é»„èŠ±æ¢¨ã€é‡‘åˆšè©æç­‰
- **å·¥è‰ºè¯„ä¼°**ï¼šæ‰‹å·¥æ‰“ç£¨ã€ä¼ ç»Ÿå·¥è‰ºã€ç°ä»£å·¥è‰ºç­‰
- **ä»·å€¼ä¼°ç®—**ï¼šåŸºäºæè´¨å’Œå·¥è‰ºçš„å¸‚åœºä»·æ ¼åŒºé—´
- **ä¸“ä¸šå»ºè®®**ï¼šåŒ…æµ†ã€çº¹ç†ã€å¯†åº¦ç­‰ä¸“ä¸šè¯„ä»·

### 3. æ–‡åŒ–ä¼ æ‰¿
- **å†å²èƒŒæ™¯**ï¼šä½›ç çš„æ–‡åŒ–å†å²å’Œå®—æ•™æ„ä¹‰
- **ä¿å…»æŒ‡å¯¼**ï¼šä¸“ä¸šçš„ç›˜ç©å’Œä¿å…»å»ºè®®

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **API é™æµ**ï¼šé˜²æ­¢æ¶æ„è°ƒç”¨
- **æ–‡ä»¶éªŒè¯**ï¼šä¸¥æ ¼çš„å›¾ç‰‡æ ¼å¼å’Œå¤§å°æ£€æŸ¥
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **é™çº§ç­–ç•¥**ï¼šAI æœåŠ¡ä¸å¯ç”¨æ—¶çš„å¤‡ç”¨æ–¹æ¡ˆ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **å›¾ç‰‡å‹ç¼©**ï¼šè‡ªåŠ¨å‹ç¼©å›¾ç‰‡å‡å°‘ä¼ è¾“æ—¶é—´
- **ç¼“å­˜æœºåˆ¶**ï¼šåˆ†æç»“æœæœ¬åœ°ç¼“å­˜
- **å¹¶å‘å¤„ç†**ï¼šæ”¯æŒå¤šç”¨æˆ·åŒæ—¶ä½¿ç”¨
- **CDN åŠ é€Ÿ**ï¼šé™æ€èµ„æº CDN åˆ†å‘

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **API å¯†é’¥é”™è¯¯**
   - æ£€æŸ¥ `.env` æ–‡ä»¶é…ç½®
   - ç¡®è®¤ API å¯†é’¥æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿé…é¢

2. **å›¾ç‰‡ä¸Šä¼ å¤±è´¥**
   - æ”¯æŒæ ¼å¼ï¼šJPGã€PNGã€WebP
   - æ–‡ä»¶å¤§å°é™åˆ¶ï¼š5MB

3. **AI åˆ†æè¶…æ—¶**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - å°è¯•å‹ç¼©å›¾ç‰‡å¤§å°

### æ—¥å¿—æŸ¥çœ‹
```bash
# PM2 æ—¥å¿—
pm2 logs fozhu-ai-backend

# å®æ—¶æ—¥å¿—
tail -f logs/app.log
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- ğŸ“§ é‚®ç®±ï¼šsupport@example.com
- ğŸ’¬ å¾®ä¿¡ï¼šyour-wechat-id
- ğŸ› é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/your-repo/issues)

## ğŸ™ è‡´è°¢

- OpenAI æä¾›çš„ GPT-4 Vision API
- Google æä¾›çš„ Gemini Vision API
- å¾®ä¿¡å°ç¨‹åºå¼€å‘å¹³å°
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒ

---

**è®© AI æŠ€æœ¯ä¼ æ‰¿ä½›ç æ–‡åŒ–ï¼Œè®©ä¼ ç»Ÿå·¥è‰ºç„•å‘æ–°çš„ç”Ÿæœºï¼** ğŸ™âœ¨